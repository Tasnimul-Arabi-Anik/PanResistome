// Nextflow configuration file

// Enable conda by default
conda.enabled = true

// Process configuration
process {
    // Default settings
    cpus = 24
    memory = '8 GB'
    time = '2h'
    
    // Process-specific settings
    withName: FETCHM {
        conda = 'envs/fetchm.yaml'
        cpus = 24
        memory = '8 GB'
        time = '2h'
    }
    
    withName: ABRICATE {
        conda = 'envs/abricate.yaml'
        cpus = 24
        memory = '16 GB'
        time = '1h'
    }
    
    withName: PANR {
        conda = 'envs/fetchm.yaml'
        cpus = 24
        memory = '8 GB'
        time = '30m'
    }
    
    withName: COLLECT_RESULTS {
        conda = false
        cpus = 1
        memory = '2 GB'
        time = '10m'
    }
}

// Executor configuration
executor {
    name = 'local'
    cpus = 24
    memory = '16 GB'
}

// Report configuration
report {
    enabled = true
    overwrite = true     
    file = "pipeline_report.html"
}

timeline {
    enabled = true
    overwrite = true    
    file = "pipeline_timeline.html"
}

trace {
    enabled = true
    overwrite = true      
    file = "pipeline_trace.txt"
}

dag {
    enabled = true
    overwrite = true      
    file = "pipeline_dag.svg"
}

// Manifest
manifest {
    name = 'fetchm-abricate-panr-pipeline'
    description = 'A pipeline for running panresistome analysis'
    version = '1.0.0'
    nextflowVersion = '>=21.0.0'
}

// Profiles for different execution modes
profiles {
    conda {
        process.conda = true
    }
}